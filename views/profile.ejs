<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <script src="https://use.fontawesome.com/f6ba9fa57d.js"></script>

    <style type="text/css">
		:root{
        --white : #F7F7F7;
        --light_grey : #747A72;
        --grey : #575B56 ;
        --dark_grey :#333834 ;
        --black : #1B231B ;
        --LightPink: #DD8A8A;
		--LightThemePink: #ffa0a4;
      }
      .card-img-top {
          width: 100%;
          height: 15vw;
          object-fit: cover;
      }
      body{
        padding-top: 100px;
        background: var(--black);
        color: var(--LightPink);
      }
      .navbar-light{
        background-color: transparent;
      }
      .navbar{
        min-height: 70px;
		backdrop-filter: blur(72px);
      }
	  .Highlighter_light{
			box-shadow: 3px 3px 30px yellow;
		}
		.Highlighter_dark{
			box-shadow: 5px 5px 30px black;
		}
	  #Theme_change_button_dark{
			cursor: pointer;
		    transition: 0.5s;
			display: none;
		}
		#Theme_change_button_light{
			cursor: pointer;
		    transition: 0.5s;
		}
      .text{
         font-family: 'Lobster', cursive; 
      }
		
	  .light_theme{
        background: #FFF8DC;
        color: #374B73;
      }
      .dark{
        background-color: #FFB6C1;
      }
      .icon_color_white{
        color: var(--LightPink);
      }
      .icon_color_black{
        color: var(--LightThemePink);
      }
      .card_color{
        background-color:  var(--black);
      }
    </style>

    <title>My profile</title>
  </head>
  <body>
	
    <nav class="navbar navbar-light navbar-expand-sm fixed-top">
      <button class="navbar-toggler dark" id="Dropdownicon" type="button" data-toggle="collapse" data-target="#Navbar">
            <span class="navbar-toggler-icon"></span>
        </button>
		<a class="navbar-brand" href="/Buysell"><img id ="logo" src="/stylesheets/logo_dark.jpeg" height="70" width="70" style="border-radius: 50%"></a>
      <div class="collapse navbar-collapse" id="Navbar">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/Buysell" style="font-size: 1.5rem;">
              <span class="fa fa-home fa-lg icon_color_white" id="icon"></span>
            </a>
          </li>
        </ul>
      </div>
	 <img id="Theme_change_button_light" height="38" width="38" src="https://img.icons8.com/doodle/48/000000/sun--v1.png"/>
	 <img id="Theme_change_button_dark" height="30" width="30" src="https://img.icons8.com/ios-filled/50/000000/moon-man.png"/>
    </nav>


    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-5">
          <img src="<%= currentUser.googleData._json.picture %>" class="img-fluid ml-md-4 mt-md-4" alt="user image" style="max-width:100%; height:auto; border-radius: 50%">
        </div>
        <div class="col-md-5">
          <h2 class="mt-md-5 ml-auto text"> <%= currentUser.googleData.displayName %></h2>
          <p  class="ml-auto text"> <%= currentUser.googleData._json.email %> </p>
        </div>
      </div>
	<div class='row mt-3 justify-content-center'>
		<% items.forEach(function(i) { %>
		<% if(currentUser && i.author.id.equals(currentUser._id)){ %>
		<div class="mt-3 mb-3 col-md-4 justify-content-around d-flex">
			<div class="card card_color" style="border-radius: 25px 0 25px 0; box-shadow: -5px -5px 10px var(--grey) , 3px 3px 15px var(--black); cursor: pointer;"> 
				<img class="card-img-top" style="border-radius: 25px 0 0 0;" src="data:image/<%=i.img.contentType%>;base64, 
				<%=i.img.data.toString('base64')%>" alt="Card image cap">
				<div class="card-body">
					<h5 class="card-title text" style="color: var(--white);"><%= i.name %></h5>
				</div>
				<div class="btn-group" role="group" aria-label="Basic example">
			<!-- 		EDIT AND DELETE BUTTON				 -->
					<a href="/Buysell/item/<%=i._id%>/edit" style=width:70px>
						<button type="button"class='btn btn-outline-primary'>Edit</button>
					</a>

					<form style="padding-left:0"method='post' action='/Buysell/item/<%=i._id%>?_method=DELETE'>
						<button type="button" class='btn btn-outline-danger'>Delete</button>
					</form>	
				</div>
				<% } %>
			</div>
		</div>
		<% }) %>
	</div>
</div>


    
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		
	<script type="text/javascript">
      var b = document.body;
      var icon = document.getElementById("icon");
      var Dropdownicon = document.getElementById("Dropdownicon");
	  var themechanger_light = document.getElementById("Theme_change_button_light");
	  var themechanger_dark = document.getElementById("Theme_change_button_dark");
	  var CARD = document.getElementsByClassName("card");
	   themechanger_light.addEventListener("click", function() {
        b.classList.toggle("light_theme");
        icon.classList.toggle("icon_color_black");
		themechanger_light.style.display ="none";
		themechanger_dark.style.display ="block";
		document.getElementById("logo").src = "/stylesheets/logo_light.jpeg";
		var i;
		for(i = 0; i<CARD.length; i++)
			{
				CARD[i].style.backgroundColor = "var(--LightThemePink)";
				CARD[i].style.boxShadow = "-5px -5px 10px var(--LightPink) , 3px 3px 15px var(--LightThemePink)";
			}
      })
		
		themechanger_dark.addEventListener("click", function() {
        b.classList.toggle("light_theme");
        icon.classList.toggle("icon_color_black");
		themechanger_dark.style.display ="none";
		themechanger_light.style.display ="block";
		document.getElementById("logo").src = "/stylesheets/logo_dark.jpeg";
		var i;
		for(i = 0; i<CARD.length; i++)
			{
				CARD[i].style.backgroundColor = "var(--black)";
				CARD[i].style.boxShadow = "-5px -5px 10px var(--grey) , 3px 3px 15px var(--black)";
			}
      })
		
	  themechanger_light.addEventListener("mouseenter", (e)=>{
		themechanger_light.classList.add("Highlighter_light");
	});
	themechanger_light.addEventListener("mouseleave", (e)=>{
		themechanger_light.classList.toggle("Highlighter_light");
	});
	
	themechanger_dark.addEventListener("mouseenter", (e)=>{
		themechanger_dark.classList.add("Highlighter_dark");
	});
	themechanger_dark.addEventListener("mouseleave", (e)=>{
		themechanger_dark.classList.toggle("Highlighter_dark");
	});
    </script>
		
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>